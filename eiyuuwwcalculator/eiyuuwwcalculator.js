const formBase=document.getElementById("formBase"),formExpItems=document.getElementById("formExpItems"),r4=document.getElementById("rarity4"),r3=document.getElementById("rarity3"),r2=document.getElementById("rarity2"),relR4=document.getElementsByClassName("relR4"),relR3=document.getElementsByClassName("relR3"),relR2=document.getElementsByClassName("relR2"),rarityList=["r4","r3","r2"],relRarityList=["relR4","relR3","relR2"],pLv=document.getElementById("paramLv"),pHp=document.getElementById("paramHp"),pPa=document.getElementById("paramPa"),pPd=document.getElementById("paramPd"),pMa=document.getElementById("paramMa"),pMd=document.getElementById("paramMd"),relLv=document.getElementsByClassName("relLv"),relHp=document.getElementsByClassName("relHp"),relPa=document.getElementsByClassName("relPa"),relPd=document.getElementsByClassName("relPd"),relMa=document.getElementsByClassName("relMa"),relMd=document.getElementsByClassName("relMd"),relNotLv=document.getElementsByClassName("relNotLv"),relParamList=["relLv","relHp","relPa","relPd","relMa","relMd"],rarityRadio=document.getElementsByName("rarity");for(let e=0;e<rarityRadio.length;e++)rarityRadio[e].addEventListener("change",selectRarity);const paramRadio=document.getElementsByName("param");for(let e=0;e<paramRadio.length;e++)paramRadio[e].addEventListener("change",selectParam);const doCalc=document.getElementsByClassName("calc");for(let e=0;e<doCalc.length;e++)doCalc[e].addEventListener("change",calc);const doReset=document.getElementsByClassName("btnReset");for(let e=0;e<doReset.length;e++)doReset[e].addEventListener("click",reset);const doPlus=document.getElementsByClassName("spin-plus");for(let e=0;e<doPlus.length;e++)doPlus[e].addEventListener("click",calc),doPlus[e].addEventListener("touchend",calc);const doMinus=document.getElementsByClassName("spin-minus");for(let e=0;e<doMinus.length;e++)doMinus[e].addEventListener("click",calc),doMinus[e].addEventListener("touchend",calc);function reset(){new Promise((function(e){e(console.log("RESET"))})).then((function(){formBase.reset(),formExpItems.reset()})).then((function(){r4.checked=!0,pLv.checked=!0})).then((function(){selectRarity(),selectParam()}))}new Promise((function(e){e()})).then((function(){clearRel()})).then((function(){r4.checked=!0,pLv.checked=!0})).then((function(){selectRarity(),selectParam()})).then((function(){calc()})),document.addEventListener("keyup",calc);const input=document.getElementsByTagName("input");for(let e=0;e<input.length;e++)input[e].addEventListener("change",calc);function clearRel(){let e=document.querySelectorAll("[class^=rel]");for(let t=0;t<e.length;t++)e[t].style.display="none"}function setClassStyle(e,t,l){const n=document.getElementsByClassName(e);return function(){for(let e=0;e<n.length;e++)n[e].style.setProperty(t,l)}()}function rarityFilter(e){if(e){setClassStyle(relRarityList.filter((function(t){return t==e}))[0],"display","block");const t=relRarityList.filter((function(t){return t!=e}));for(let e=0;e<t.length;e++)setClassStyle(t[e],"display","none")}}function selectRarity(){const e=document.getElementById("expMaxR");function t(t,l){new Promise((function(e){e()})).then((function(){e.innerText="("+t+")",clearRel(),rarityFilter("rel"+l),calc()}))}r4.checked?t("★4","R4"):r3.checked?t("★3","R3"):r2.checked&&t("★2","R2")}function paramFilter(e){if(e){setClassStyle(relParamList.filter((function(t){return t==e}))[0],"display","flex");const t=relParamList.filter((function(t){return t!=e}));for(let e=0;e<t.length;e++)setClassStyle(t[e],"display","none")}}function selectParam(){pLv.checked&&r4.checked?(clearRel(),paramFilter("relLv"),setClassStyle("relR4","display","block"),setClassStyle("relR3","display","none"),setClassStyle("relR2","display","none"),setClassStyle("relNotLv","display","none"),calc()):pLv.checked&&r3.checked?(clearRel(),paramFilter("relLv"),setClassStyle("relR4","display","none"),setClassStyle("relR3","display","block"),setClassStyle("relR2","display","none"),calc()):pLv.checked&&r2.checked?(clearRel(),paramFilter("relLv"),setClassStyle("relR4","display","none"),setClassStyle("relR3","display","none"),setClassStyle("relR2","display","block"),calc()):pHp.checked?(clearRel(),paramFilter("relHp"),calc()):pPa.checked?(clearRel(),paramFilter("relPa"),calc()):pPd.checked?(clearRel(),paramFilter("relPd"),calc()):pMa.checked?(clearRel(),paramFilter("relMa"),calc()):pMd.checked&&(clearRel(),paramFilter("relMd"),calc())}function getSelect(e){const t=document.getElementById("maxValLv"+e);return t.options[t.selectedIndex].value-1}function calc(){const e=document.getElementsByName("itemLv"),t=document.getElementsByName("itemHp"),l=document.getElementsByName("itemPa"),n=document.getElementsByName("itemPd"),a=document.getElementsByName("itemMa"),r=document.getElementsByName("itemMd"),c=300*e[0].value+3e3*e[1].value+15e3*e[2].value,s=100*t[0].value+1e3*t[1].value+5e3*t[2].value,m=5*l[0].value+50*l[1].value+250*l[2].value,d=5*n[0].value+50*n[1].value+250*n[2].value+1250*n[3].value,o=5*a[0].value+50*a[1].value+250*a[2].value,u=5*r[0].value+50*r[1].value+250*r[2].value+1250*r[3].value;function i(e,t){document.getElementById("expResultParam").innerText="("+e+")";const l=document.getElementById("currentValLv").value-1,n=document.getElementById("currentValHp").value,a=document.getElementById("currentValPa").value,r=document.getElementById("currentValPd").value,i=document.getElementById("currentValMa").value,y=document.getElementById("currentValMd").value,p=document.getElementById("maxValLvR4").value-1,f=document.getElementById("maxValLvR3").value-1,g=document.getElementById("maxValLvR2").value-1,v=document.getElementById("maxValHp").value,E=document.getElementById("maxValPa").value,h=document.getElementById("maxValPd").value,R=document.getElementById("maxValMa").value,B=document.getElementById("maxValMd").value,L=document.getElementById("nextVal").value;function k(e,t){const l={r4:r4NextList,r3:r3NextList,r2:r2NextList,hp:hpNextList,atk:atkNextList,def:defNextList};let n=0;for(let a=0;a<t;a++)n+=l[e][a];return n}document.getElementById("resultExp").innerHTML=String(function(){if("R4"==t){const e=k("r4",p)-k("r4",l)-(r4NextList[l]-L)-c;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("R3"==t){const e=k("r3",f)-k("r3",l)-(r3NextList[l]-L)-c;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("R2"==t){const e=k("r2",g)-k("r2",l)-(r2NextList[l]-L)-c;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("Hp"==t){const e=k("hp",v/10)-k("hp",n/10)-(hpNextList[n/10]-L)-s;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("Pa"==t){const e=k("atk",E)-k("atk",a)-(atkNextList[a]-L)-m;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("Pd"==t){const e=k("def",h)-k("def",r)-(defNextList[r]-L)-d;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("Ma"==t){const e=k("atk",R)-k("atk",i)-(atkNextList[i]-L)-o;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}else if("Md"==t){const e=k("def",B)-k("def",y)-(defNextList[y]-L)-u;if(e>=0)return e;if(e<0)return"<small>"+e+"</small>";console.log("無効な数値です")}}())}pLv.checked&&r4.checked?i("Lv","R4"):pLv.checked&&r3.checked?i("Lv","R3"):pLv.checked&&r2.checked?i("Lv","R2"):pHp.checked?i("HP","Hp"):pPa.checked?i("物攻","Pa"):pPd.checked?i("物防","Pd"):pMa.checked?i("魔攻","Ma"):pMd.checked?i("魔防","Md"):console.log("無効なパラメータ")}function selectItem(){}const hpMax=document.getElementsByClassName("hpMax");for(let e=0;e<hpMax.length;e++)hpMax[e].innerText="14950";const atkMax=document.getElementsByClassName("atkMax");for(let e=0;e<atkMax.length;e++)atkMax[e].innerText="190";const defMax=document.getElementsByClassName("defMax");for(let e=0;e<atkMax.length;e++)defMax[e].innerText="162";